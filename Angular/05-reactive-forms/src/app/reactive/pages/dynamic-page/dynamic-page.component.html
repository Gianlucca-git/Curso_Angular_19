<header-component [title]="'Dynamic'">

  <div class="stats stats-vertical lg:stats-horizontal w-full">

    <div class="stat">
      <form autocomplete="off" [formGroup]="myForm">

        <fieldset class="fieldset">
          <legend class="fieldset-legend">Name</legend>
          <input
            type="text" class="input"
            placeholder="Full Name"
            formControlName="name"
          />
          @if (formUtils.isValidFiled(myForm, 'name')) {
            <p class="label text-red-800">{{ formUtils.getFieldError(myForm, 'name') }}</p>
          }
          <p class="label text-danger">error message</p>
        </fieldset>

        <fieldset class="fieldset">
          <legend class="fieldset-legend">Add Game</legend>
          <div>
            <input
              type="text" class="input"
              placeholder="Name Game"
            />
            <button type="submit" class="btn btn-primary float-end">Add Fav</button>
          </div>
          <p class="label text-danger">The price must be 0 or greater</p>
        </fieldset>

        <br>
        <div class="divider">Favorites</div>

        <section formArrayName="favoriteGames">
          @for (favoriteGame of favoriteGames.controls; track $index; let i = $index) {

            <fieldset class="fieldset">
              <div>
                <input
                  class="input"
                  [formControlName]="i"
                >
                <button class="btn btn-error float-end" type="button">Delete</button>
              </div>
              @if (formUtils.isValidFieldInArray(favoriteGames, i)) {
                <p class="label text-red-800">{{ formUtils.getFieldErrorInArray(favoriteGames, i) }}</p>
              }
            </fieldset>
          }
        </section>

        <button type="submit" class="btn btn-primary mt-7">
          <!-- [disabled]="myForm.invalid" -->
          Send
        </button>

      </form>
    </div>

    <div class="stat bg-neutral text-neutral-content">
      <div class="card-body font-sans">
        <h2 class="items-center text-center font-semibold">Terminal</h2>

        <span><pre>Valid:  {{ myForm.valid | json }}</pre> </span>
        <span><pre>Value:  {{ myForm.value | json }}</pre> </span>

        <!--        <span>Agregar Juego</span>-->
        <!--        <span><pre>Value:  {{ myForm.valid | json }}</pre> </span>-->
        <!--        <span><pre>Value:  {{ myForm.valid | json }}</pre> </span>-->

      </div>
    </div>
  </div>
</header-component>
